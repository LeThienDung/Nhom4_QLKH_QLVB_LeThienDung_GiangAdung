<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_ky_luong_form" model="ir.ui.view">
            <field name="name">ky.luong.form</field>
            <field name="model">nhan.su.ky.luong</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="tinh_luong_tat_ca" string="Tính lương (Tự động)" type="object" states="draft" class="oe_highlight"/>
                        
                        <button name="action_confirm" string="Chốt sổ" type="object" states="draft" class="oe_highlight"/>
                        <button name="action_done" string="Thanh toán" type="object" states="confirm" class="oe_highlight"/>
                        <button name="action_draft" string="Mở lại" type="object" states="confirm,done"/>
                        
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name" readonly="1"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="thang" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="nam" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            </group>
                            <group>
                                <field name="tong_tien_phai_tra" widget="monetary" decoration-bf="1" style="font-size: 20px"/>
                            </group>
                        </group>
                        
                        <field name="chi_tiet_ids" attrs="{'readonly': [('state', '!=', 'draft')]}">
                            <tree editable="bottom">
                                <field name="nhan_vien_id"/>
                                <field name="so_cong_thuc_te"/>
                                <field name="tong_tien_ot"/>
                                <field name="tong_tien_phat"/>
                                <field name="phu_cap"/>
                                <field name="tong_luong" sum="Tổng" widget="monetary" decoration-bf="1"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_ky_luong_tree" model="ir.ui.view">
            <field name="name">ky.luong.tree</field>
            <field name="model">nhan.su.ky.luong</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="thang"/>
                    <field name="nam"/>
                    <field name="tong_tien_phai_tra" widget="monetary"/>
                    <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state == 'confirm'" decoration-success="state == 'done'"/>
                </tree>
            </field>
        </record>

        <record id="action_ky_luong" model="ir.actions.act_window">
            <field name="name">Bảng Lương Tháng</field>
            <field name="res_model">nhan.su.ky.luong</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="menu_bang_luong" name="Bảng Lương" parent="menu_root" action="action_ky_luong" sequence="20"/>
    </data>
</odoo>